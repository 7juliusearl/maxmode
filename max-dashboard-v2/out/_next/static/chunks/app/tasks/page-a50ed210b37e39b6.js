(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{3612:function(e,t,s){Promise.resolve().then(s.bind(s,6031))},6031:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),r=s(2265);let o=[{id:"pending",label:"Awaiting Julius",color:"border-[#FBBF24]",icon:"⏳"},{id:"todo",label:"To Do",color:"border-[#0D9488]",icon:"\uD83D\uDCCB"},{id:"inprogress",label:"In Progress",color:"border-[#60A5FA]",icon:"\uD83D\uDD04"},{id:"done",label:"Done",color:"border-[#22C55E]",icon:"✅"}];function n(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([{role:"assistant",content:"Hi! I'm Max, your AI task manager. Just describe what you need to do, and I'll:\n\n1️⃣ Create a task from your description\n2️⃣ Ask clarifying questions if needed\n3️⃣ Add it to your task board\n\nWhat would you like to get done today?",type:"info"}]),[l,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[x,p]=(0,r.useState)(!1),h=(0,r.useRef)(null);(0,r.useEffect)(()=>{D()},[]);let D=async()=>{try{let e=await fetch("/api/tasks/get"),s=await e.json();s.success&&s.tasks&&(t(s.tasks),p(!0))}catch(s){let e=localStorage.getItem("maxmode-tasks-kanban");e&&t(JSON.parse(e))}},g=async e=>{t(e);try{await fetch("/api/tasks/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tasks:e})}),p(!0)}catch(e){console.error(e)}localStorage.setItem("maxmode-tasks-kanban",JSON.stringify(e)),window.dispatchEvent(new Event("maxmode-task-changed"))},y=e=>{let t=e.toLowerCase(),s="General";for(let[e,a]of Object.entries({wedding:["wedding","bride","groom","venue","vendor","marriage"],business:["quote","invoice","client","lead","sale","proposal","contract","business"],marketing:["email","social","post","ad","campaign","content","marketing"],personal:["personal","family","friend","birthday","kids","wife"]}))if(a.some(e=>t.includes(e))){s=e.charAt(0).toUpperCase()+e.slice(1);break}let a="medium";t.includes("urgent")||t.includes("asap")||t.includes("important")||t.includes("!")?a="high":(t.includes("whenever")||t.includes("sometime")||t.includes("low priority"))&&(a="low");let r="julius";(t.includes("max")||t.includes("you"))&&(r="max");let o=null,n=new Date;if(t.includes("tomorrow")){let e=new Date(n);e.setDate(e.getDate()+1),o=e.toISOString().split("T")[0]}else if(t.includes("next week")){let e=new Date(n);e.setDate(e.getDate()+7),o=e.toISOString().split("T")[0]}else t.includes("today")&&(o=n.toISOString().split("T")[0]);let l=t.replace(/tomorrow|today|next week|urgent|asap|important|whenever|sometime|max|you|julius|remember to |remind me to |i need to |i should |can you |task: /gi,"").replace(/\s+/g," ").trim();return{text:(l=l.charAt(0).toUpperCase()+l.slice(1))||e,category:s,priority:a,assignee:r,dueDate:o}},b=t=>{let s={id:Date.now().toString()+Math.random().toString(36).substr(2,9),text:t.text||"",status:"max"===t.assignee?"pending":"todo",assignee:t.assignee||"julius",category:t.category||"General",priority:t.priority||"medium",dueDate:t.dueDate||null,createdAt:new Date().toISOString()};return g([s,...e]),s},f=e=>{let t=["\uD83D\uDCDD **Task Summary**"];if(t.push('"'.concat(e.text,'"')),"high"===e.priority?t.push("\uD83D\uDD34 Priority: High"):"low"===e.priority?t.push("\uD83D\uDFE2 Priority: Low"):t.push("\uD83D\uDFE1 Priority: Medium"),e.dueDate){let s=new Date(e.dueDate),a=new Date;s.toDateString()===a.toDateString()?t.push("\uD83D\uDCC5 Due: Today"):s.toDateString()===new Date(a.setDate(a.getDate()+1)).toDateString()?t.push("\uD83D\uDCC5 Due: Tomorrow"):t.push("\uD83D\uDCC5 Due: ".concat(s.toLocaleDateString()))}return t.push("\uD83D\uDCC1 Category: ".concat(e.category)),t.push("\uD83D\uDC64 Assignee: ".concat("max"===e.assignee?"\uD83E\uDD16 Max":"\uD83D\uDC64 Julius")),t.join("\n")},v=async e=>{if(e.preventDefault(),!l.trim()||c)return;let t=l.trim();i(""),n(e=>[...e,{role:"user",content:t}]),d(!0),await new Promise(e=>setTimeout(e,600));let s=t.toLowerCase();if(u){if(s.includes("yes")||s.includes("yeah")||s.includes("yep")||s.includes("sure")||s.includes("go")||s.includes("do it")){let e=b(u);m(null),n(t=>[...t,{role:"assistant",content:'✅ Task created successfully!\n\n"'.concat(e.text,'" has been added to your board.\n\nAnything else I can help with?'),type:"task_update"}])}else if(s.includes("no")||s.includes("nope")||s.includes("cancel")||s.includes("nevermind"))m(null),n(e=>[...e,{role:"assistant",content:"No problem! Task cancelled.\n\nWhat else would you like to do?",type:"info"}]);else if(s.includes("change")||s.includes("modify")||s.includes("edit")){let e={...u};if(s.includes("high priority")||s.includes("urgent")?e.priority="high":s.includes("low priority")?e.priority="low":s.includes("medium priority")&&(e.priority="medium"),s.includes("tomorrow")){let t=new Date;t.setDate(t.getDate()+1),e.dueDate=t.toISOString().split("T")[0]}m(e),n(t=>[...t,{role:"assistant",content:"Updated! Here's the new task:\n\n".concat(f(e),'\n\nSay "yes" to confirm or "change" to modify.'),type:"task_confirmation",taskData:e}])}else n(e=>[...e,{role:"assistant",content:'Please say "yes" to confirm or "no" to cancel.',type:"info"}])}else{let e=y(t);e.text&&e.text.length>2?(m(e),n(t=>[...t,{role:"assistant",content:"I've analyzed your request. Here's what I understood:\n\n".concat(f(e),'\n\nDoes this look correct? Say "yes" to create or "no" to cancel.'),type:"task_confirmation",taskData:e}])):n(e=>[...e,{role:"assistant",content:'I\'m not sure what you mean. Could you describe the task more clearly?\n\nTry: "Follow up with the bride tomorrow" or "Send quote to client urgent"',type:"info"}])}d(!1)},w=t=>e.filter(e=>e.status===t),j=e=>{switch(e){case"high":return"\uD83D\uDD34 High";case"medium":return"\uD83D\uDFE1 Medium";case"low":return"\uD83D\uDFE2 Low";default:return e}},N=e=>{if(!e)return"";let t=new Date(e),s=new Date;return t.toDateString()===s.toDateString()?"Today":t.toDateString()===new Date(s.setDate(s.getDate()+1)).toDateString()?"Tomorrow":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return(0,a.jsxs)("div",{className:"p-4 md:p-6 min-h-screen",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tasks"}),(0,a.jsxs)("p",{className:"text-[var(--color-text-muted)]",children:[e.length," tasks • ",x?"☁️ Synced":"\uD83D\uDCF1 Local"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-8",children:o.map(e=>(0,a.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl px-4 py-3 border-t-2 ".concat(e.color),children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:w(e.id).length}),(0,a.jsxs)("p",{className:"text-xs text-[var(--color-text-muted)]",children:[e.icon," ",e.label]})]},e.id))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"card flex flex-col h-[600px]",children:[(0,a.jsxs)("div",{className:"bg-[var(--color-surface)] px-5 py-4 border-b border-[var(--color-border-subtle)] rounded-t-xl",children:[(0,a.jsxs)("h2",{className:"font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCAC"}),"Chat with Max"]}),(0,a.jsx)("p",{className:"text-xs text-[var(--color-text-muted)] mt-1",children:"Describe tasks naturally, I'll handle the rest"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[0===s.length?(0,a.jsxs)("div",{className:"text-center py-12 text-[var(--color-text-muted)]",children:[(0,a.jsx)("p",{className:"text-lg",children:"\uD83D\uDC4B Welcome!"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Describe a task and I'll create it for you."})]}):s.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[85%] rounded-2xl px-5 py-3 ".concat("user"===e.role?"bg-[var(--color-primary)] text-white rounded-tr-sm":"task_confirmation"===e.type?"bg-[var(--color-surface)] border border-[var(--color-primary)] text-white rounded-tl-sm":"bg-[var(--color-surface)] text-white rounded-tl-sm"),children:["task_confirmation"===e.type&&(0,a.jsxs)("div",{className:"mb-3 pb-3 border-b border-[var(--color-border-subtle)]",children:[(0,a.jsx)("p",{className:"text-xs text-[var(--color-text-muted)] mb-2",children:"\uD83D\uDCDD Task to create:"}),e.taskData&&(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsx)("p",{className:"font-medium",children:e.taskData.text}),(0,a.jsxs)("p",{className:"text-xs opacity-80",children:[e.taskData.priority&&j(e.taskData.priority)," • ",e.taskData.category,e.taskData.dueDate&&" • ".concat(N(e.taskData.dueDate))]})]})]}),(0,a.jsx)("p",{className:"whitespace-pre-line text-sm",children:e.content})]})},t)),c&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-[var(--color-surface)] rounded-2xl rounded-tl-sm px-5 py-3",children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-[var(--color-text-muted)] rounded-full animate-bounce"}),(0,a.jsx)("span",{className:"w-2 h-2 bg-[var(--color-text-muted)] rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,a.jsx)("span",{className:"w-2 h-2 bg-[var(--color-text-muted)] rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),(0,a.jsx)("div",{ref:h})]}),(0,a.jsxs)("form",{onSubmit:v,className:"p-4 border-t border-[var(--color-border-subtle)] flex gap-3",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:u?'"yes" to confirm, "no" to cancel...':"Describe a task...",className:"flex-1 bg-[var(--color-bg)] border border-[var(--color-border-subtle)] rounded-xl px-4 py-3 text-white placeholder-[var(--color-text-muted)] focus:outline-none focus:border-[var(--color-primary)]"}),(0,a.jsx)("button",{type:"submit",disabled:c||!l.trim(),className:"bg-[var(--color-primary)] hover:bg-[var(--color-primary-hover)] disabled:opacity-50 text-white px-6 py-3 rounded-xl font-medium transition-colors",children:"→"})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"card h-[600px] flex flex-col",children:[(0,a.jsx)("div",{className:"bg-[var(--color-surface)] px-5 py-4 border-b border-[var(--color-border-subtle)] rounded-t-xl",children:(0,a.jsxs)("h2",{className:"font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCB"}),"Task Board"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===w("todo").length&&0===w("inprogress").length&&0===w("done").length?(0,a.jsxs)("div",{className:"text-center py-8 text-[var(--color-text-muted)]",children:[(0,a.jsx)("p",{className:"text-sm",children:"No tasks yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Create one in the chat!"})]}):(0,a.jsxs)(a.Fragment,{children:[w("todo").map(e=>(0,a.jsxs)("div",{className:"bg-[var(--color-bg)] rounded-lg p-4 border border-[var(--color-border-subtle)]",children:[(0,a.jsx)("p",{className:"text-white font-medium mb-2",children:e.text}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded ".concat("high"===e.priority?"priority-high":"low"===e.priority?"priority-low":"priority-medium"),children:e.priority}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded bg-[var(--color-surface)] text-[var(--color-text-muted)]",children:e.category}),e.dueDate&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded bg-[var(--color-surface)] text-[var(--color-text-muted)]",children:N(e.dueDate)})]})]},e.id)),w("inprogress").map(e=>(0,a.jsxs)("div",{className:"bg-[var(--color-bg)] rounded-lg p-4 border border-[#60A5FA]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"text-[#60A5FA]",children:"\uD83D\uDD04"}),(0,a.jsx)("p",{className:"text-white font-medium",children:e.text})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 text-xs",children:(0,a.jsx)("span",{className:"px-2 py-0.5 rounded bg-[#60A5FA]/20 text-[#60A5FA]",children:"In Progress"})})]},e.id)),w("done").slice(0,5).map(e=>(0,a.jsx)("div",{className:"bg-[var(--color-bg)] rounded-lg p-4 border border-[#22C55E]/30 opacity-75",children:(0,a.jsx)("p",{className:"text-white line-through decoration-[#22C55E]",children:e.text})},e.id))]})})]})})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3612)}),_N_E=e.O()}]);