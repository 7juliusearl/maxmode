(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{3612:function(e,t,a){Promise.resolve().then(a.bind(a,6031))},6031:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var s=a(7437),r=a(2265),o=a(7648);let n=[{id:"pending",label:"Awaiting Julius",color:"border-[#FBBF24]",icon:"⏳"},{id:"todo",label:"To Do",color:"border-[#0D9488]",icon:"\uD83D\uDCCB"},{id:"inprogress",label:"In Progress",color:"border-[#60A5FA]",icon:"\uD83D\uDD04"},{id:"done",label:"Done",color:"border-[#22C55E]",icon:"✅"}];function l(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[i,c]=(0,r.useState)([{role:"assistant",content:"Hi! I'm Max, your AI task manager. Just describe what you need to do, and I'll:\n\n1️⃣ Create a task from your description\n2️⃣ Ask clarifying questions if needed\n3️⃣ Add it to your task board\n\nWhat would you like to get done today?\n\n\uD83D\uDCA1 Tip: For research tasks, I'll create detailed reports you can view on the Research page.",type:"info"}]),[d,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[x,p]=(0,r.useState)(null),[D,g]=(0,r.useState)(!1),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{b(),f()},[]);let b=async()=>{try{let e=await fetch("/api/tasks/get"),a=await e.json();a.success&&a.tasks&&(t(a.tasks),g(!0))}catch(a){let e=localStorage.getItem("maxmode-tasks-kanban");e&&t(JSON.parse(e))}},f=async()=>{try{let e=await fetch("/api/research/get"),t=await e.json();t.success&&t.items&&l(t.items)}catch(t){let e=localStorage.getItem("maxmode-research");e&&l(JSON.parse(e))}},v=async e=>{t(e);try{await fetch("/api/tasks/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tasks:e})}),g(!0)}catch(e){console.error(e)}localStorage.setItem("maxmode-tasks-kanban",JSON.stringify(e)),window.dispatchEvent(new Event("maxmode-task-changed"))},w=e=>{let t=e.toLowerCase(),a=["research","look up","find out","investigate","analyze","compare"].some(e=>t.includes(e))||t.includes("?"),s=a?"Research":"General";for(let[e,a]of Object.entries({wedding:["wedding","bride","groom","venue","vendor","marriage"],business:["quote","invoice","client","lead","sale","proposal","contract","business"],marketing:["email","social","post","ad","campaign","content","marketing"],personal:["personal","family","friend","birthday","kids","wife"]}))if(a.some(e=>t.includes(e))){s=e.charAt(0).toUpperCase()+e.slice(1);break}let r="medium";t.includes("urgent")||t.includes("asap")||t.includes("important")||t.includes("!")?r="high":(t.includes("whenever")||t.includes("sometime")||t.includes("low priority"))&&(r="low");let o="julius";(t.includes("max")||t.includes("you"))&&(o="max");let n=null,l=new Date;if(t.includes("tomorrow")){let e=new Date(l);e.setDate(e.getDate()+1),n=e.toISOString().split("T")[0]}else if(t.includes("next week")){let e=new Date(l);e.setDate(e.getDate()+7),n=e.toISOString().split("T")[0]}else t.includes("today")&&(n=l.toISOString().split("T")[0]);let i=t.replace(/tomorrow|today|next week|urgent|asap|important|whenever|sometime|max|you|julius|remember to |remind me to |i need to |i should |can you |task: /gi,"").replace(/\s+/g," ").trim();return{taskData:{text:(i=i.charAt(0).toUpperCase()+i.slice(1))||e,category:s,priority:r,assignee:o,dueDate:n},isResearch:a}},j=t=>{let a={id:Date.now().toString()+Math.random().toString(36).substr(2,9),text:t.text||"",status:"max"===t.assignee?"pending":"todo",assignee:t.assignee||"julius",category:t.category||"General",priority:t.priority||"medium",dueDate:t.dueDate||null,createdAt:new Date().toISOString()};return v([a,...e]),a},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=["\uD83D\uDCDD **".concat(t?"Research Request":"Task"," Summary**")];if(a.push('"'.concat(e.text,'"')),"high"===e.priority?a.push("\uD83D\uDD34 Priority: High"):"low"===e.priority?a.push("\uD83D\uDFE2 Priority: Low"):a.push("\uD83D\uDFE1 Priority: Medium"),e.dueDate){let t=new Date(e.dueDate),s=new Date;t.toDateString()===s.toDateString()?a.push("\uD83D\uDCC5 Due: Today"):t.toDateString()===new Date(s.setDate(s.getDate()+1)).toDateString()?a.push("\uD83D\uDCC5 Due: Tomorrow"):a.push("\uD83D\uDCC5 Due: ".concat(t.toLocaleDateString()))}return a.push("\uD83D\uDCC1 Category: ".concat(e.category)),a.push("\uD83D\uDC64 Assignee: ".concat("max"===e.assignee?"\uD83E\uDD16 Max":"\uD83D\uDC64 Julius")),t&&a.push("\n\uD83D\uDCDA Max will create a detailed research report that you can view on the Research page."),a.join("\n")},k=async e=>{if(e.preventDefault(),!d.trim()||m)return;let t=d.trim();u(""),c(e=>[...e,{role:"user",content:t}]),h(!0),await new Promise(e=>setTimeout(e,600));let a=t.toLowerCase();if(x){if(a.includes("yes")||a.includes("yeah")||a.includes("yep")||a.includes("sure")||a.includes("go")||a.includes("do it")){let e=j(x);p(null),"Research"===x.category||"max"===x.assignee?c(t=>[...t,{role:"assistant",content:'✅ Task created! "'.concat(e.text,'" has been added.\n\n\uD83D\uDD0D Max will conduct research and create a detailed report on the Research page.\n\nAnything else?'),type:"task_update"}]):c(t=>[...t,{role:"assistant",content:'✅ Task created successfully!\n\n"'.concat(e.text,'" has been added to your board.\n\nAnything else I can help with?'),type:"task_update"}])}else if(a.includes("no")||a.includes("nope")||a.includes("cancel")||a.includes("nevermind"))p(null),c(e=>[...e,{role:"assistant",content:"No problem! Task cancelled.\n\nWhat else would you like to do?",type:"info"}]);else if(a.includes("change")||a.includes("modify")||a.includes("edit")){let e={...x};if(a.includes("high priority")||a.includes("urgent")?e.priority="high":a.includes("low priority")?e.priority="low":a.includes("medium priority")&&(e.priority="medium"),a.includes("tomorrow")){let t=new Date;t.setDate(t.getDate()+1),e.dueDate=t.toISOString().split("T")[0]}p(e),c(t=>[...t,{role:"assistant",content:"Updated! Here's the new task:\n\n".concat(N(e,"Research"===e.category),'\n\nSay "yes" to confirm or "change" to modify.'),type:"task_confirmation",taskData:e}])}else c(e=>[...e,{role:"assistant",content:'Please say "yes" to confirm or "no" to cancel.',type:"info"}])}else{let{taskData:e,isResearch:a}=w(t);e.text&&e.text.length>2?(p(e),c(t=>[...t,{role:"assistant",content:"I've analyzed your request. Here's what I understood:\n\n".concat(N(e,a||"Research"===e.category),'\n\nDoes this look correct? Say "yes" to create or "no" to cancel.'),type:"task_confirmation",taskData:e}])):c(e=>[...e,{role:"assistant",content:'I\'m not sure what you mean. Could you describe the task more clearly?\n\nTry: "Research wedding venues" or "Follow up with the bride tomorrow"',type:"info"}])}h(!1)},S=t=>e.filter(e=>e.status===t),C=e=>{switch(e){case"high":return"\uD83D\uDD34 High";case"medium":return"\uD83D\uDFE1 Medium";case"low":return"\uD83D\uDFE2 Low";default:return e}},A=e=>{if(!e)return"";let t=new Date(e),a=new Date;return t.toDateString()===a.toDateString()?"Today":t.toDateString()===new Date(a.setDate(a.getDate()+1)).toDateString()?"Tomorrow":t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return(0,s.jsxs)("div",{className:"p-4 md:p-6 min-h-screen",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Tasks"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-[var(--color-text-muted)]",children:[(0,s.jsxs)("span",{children:[e.length," tasks"]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:D?"☁️ Synced":"\uD83D\uDCF1 Local"}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)(o.default,{href:"/research",className:"text-[var(--color-primary)] hover:underline",children:["\uD83D\uDCDA Research ",a.length]})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-3 mb-8",children:n.map(e=>(0,s.jsxs)("div",{className:"bg-[var(--color-surface)] rounded-xl px-4 py-3 border-t-2 ".concat(e.color),children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:S(e.id).length}),(0,s.jsxs)("p",{className:"text-xs text-[var(--color-text-muted)]",children:[e.icon," ",e.label]})]},e.id))}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"card flex flex-col h-[600px]",children:[(0,s.jsxs)("div",{className:"bg-[var(--color-surface)] px-5 py-4 border-b border-[var(--color-border-subtle)] rounded-t-xl",children:[(0,s.jsxs)("h2",{className:"font-semibold text-white flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDCAC"}),"Chat with Max"]}),(0,s.jsx)("p",{className:"text-xs text-[var(--color-text-muted)] mt-1",children:"Describe tasks naturally • Research goes to Research page"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[0===i.length?(0,s.jsxs)("div",{className:"text-center py-12 text-[var(--color-text-muted)]",children:[(0,s.jsx)("p",{className:"text-lg",children:"\uD83D\uDC4B Welcome!"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Describe a task and I'll create it for you."})]}):i.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[85%] rounded-2xl px-5 py-3 ".concat("user"===e.role?"bg-[var(--color-primary)] text-white rounded-tr-sm":"task_confirmation"===e.type?"bg-[var(--color-surface)] border border-[var(--color-primary)] text-white rounded-tl-sm":"bg-[var(--color-surface)] text-white rounded-tl-sm"),children:["task_confirmation"===e.type&&(0,s.jsxs)("div",{className:"mb-3 pb-3 border-b border-[var(--color-border-subtle)]",children:[(0,s.jsx)("p",{className:"text-xs text-[var(--color-text-muted)] mb-2",children:"\uD83D\uDCDD Task to create:"}),e.taskData&&(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsx)("p",{className:"font-medium",children:e.taskData.text}),(0,s.jsxs)("p",{className:"text-xs opacity-80",children:[e.taskData.priority&&C(e.taskData.priority)," • ",e.taskData.category,e.taskData.dueDate&&" • ".concat(A(e.taskData.dueDate))]})]})]}),(0,s.jsx)("p",{className:"whitespace-pre-line text-sm",children:e.content})]})},t)),m&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-[var(--color-surface)] rounded-2xl rounded-tl-sm px-5 py-3",children:(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-[var(--color-text-muted)] rounded-full animate-bounce"}),(0,s.jsx)("span",{className:"w-2 h-2 bg-[var(--color-text-muted)] rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),(0,s.jsx)("span",{className:"w-2 h-2 bg-[var(--color-text-muted)] rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})}),(0,s.jsx)("div",{ref:y})]}),(0,s.jsxs)("form",{onSubmit:k,className:"p-4 border-t border-[var(--color-border-subtle)] flex gap-3",children:[(0,s.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:x?'"yes" to confirm, "no" to cancel...':"Describe a task...",className:"flex-1 bg-[var(--color-bg)] border border-[var(--color-border-subtle)] rounded-xl px-4 py-3 text-white placeholder-[var(--color-text-muted)] focus:outline-none focus:border-[var(--color-primary)]"}),(0,s.jsx)("button",{type:"submit",disabled:m||!d.trim(),className:"bg-[var(--color-primary)] hover:bg-[var(--color-primary-hover)] disabled:opacity-50 text-white px-6 py-3 rounded-xl font-medium transition-colors",children:"→"})]})]})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"card h-[600px] flex flex-col",children:[(0,s.jsx)("div",{className:"bg-[var(--color-surface)] px-5 py-4 border-b border-[var(--color-border-subtle)] rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"font-semibold text-white flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCB"}),"Task Board"]}),(0,s.jsx)(o.default,{href:"/research",className:"text-xs text-[var(--color-primary)] hover:underline",children:"View Research →"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===S("todo").length&&0===S("inprogress").length&&0===S("done").length?(0,s.jsxs)("div",{className:"text-center py-8 text-[var(--color-text-muted)]",children:[(0,s.jsx)("p",{className:"text-sm",children:"No tasks yet"}),(0,s.jsx)("p",{className:"text-xs mt-1",children:"Create one in the chat!"})]}):(0,s.jsxs)(s.Fragment,{children:[S("todo").map(e=>(0,s.jsxs)("div",{className:"bg-[var(--color-bg)] rounded-lg p-4 border border-[var(--color-border-subtle)]",children:[(0,s.jsx)("p",{className:"text-white font-medium mb-2",children:e.text}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,s.jsx)("span",{className:"px-2 py-0.5 rounded ".concat("high"===e.priority?"priority-high":"low"===e.priority?"priority-low":"priority-medium"),children:e.priority}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded bg-[var(--color-surface)] text-[var(--color-text-muted)]",children:e.category}),e.dueDate&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded bg-[var(--color-surface)] text-[var(--color-text-muted)]",children:A(e.dueDate)})]})]},e.id)),S("inprogress").map(e=>(0,s.jsx)("div",{className:"bg-[var(--color-bg)] rounded-lg p-4 border border-[#60A5FA]",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-[#60A5FA]",children:"\uD83D\uDD04"}),(0,s.jsx)("p",{className:"text-white font-medium",children:e.text})]})},e.id)),S("done").slice(0,5).map(e=>(0,s.jsxs)("div",{className:"bg-[var(--color-bg)] rounded-lg p-4 border border-[#22C55E]/30 opacity-75",children:[(0,s.jsx)("p",{className:"text-white line-through decoration-[#22C55E]",children:e.text}),e.researchId&&(0,s.jsx)(o.default,{href:"/research",className:"text-xs text-[var(--color-primary)] hover:underline mt-2 block",children:"\uD83D\uDCDA View research results"}),e.result&&(0,s.jsx)("p",{className:"text-xs text-[var(--color-text-muted)] mt-2 line-clamp-2",children:e.result})]},e.id))]})})]})})]})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=3612)}),_N_E=e.O()}]);